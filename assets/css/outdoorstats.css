/* ==========================================================================
   OutdoorStats Custom Styles
   Outdoor/earthy + data-modern aesthetic for outdoorstats.com
   ========================================================================== */

/* --------------------------------------------------------------------------
   Color Palette
   -------------------------------------------------------------------------- */

:root {
    --os-forest: #1B4332;
    --os-sage: #52796F;
    --os-sand: #DDA15E;
    --os-sky: #457B9D;
    --os-cream: #FEFAE0;
    --os-cream-soft: #fdf8e8;
    --os-charcoal: #264653;

    --brand-color: var(--os-forest);
    --primary-text-color: var(--os-charcoal);
    --darker-gray-color: #1a2e28;
}

/* --------------------------------------------------------------------------
   Header
   -------------------------------------------------------------------------- */

.gh-head {
    border-bottom: 1px solid rgba(27, 67, 50, 0.08);
}

.gh-head-logo {
    color: var(--os-forest);
}

.gh-head-menu a {
    transition: color 0.15s ease;
}

.gh-head-menu a:hover {
    color: var(--os-sage);
}

/* --------------------------------------------------------------------------
   Homepage Cover
   -------------------------------------------------------------------------- */

.cover {
    margin-top: 56px;
    padding-bottom: 16px;
}

.cover-content {
    max-width: 600px;
}

.cover-icon-image {
    width: 100px;
    border-radius: 12px;
}

.cover-description {
    font-size: 1.85rem;
    line-height: 1.5;
    color: var(--os-sage);
    letter-spacing: -0.01em;
}

/* --------------------------------------------------------------------------
   Featured Posts Section
   -------------------------------------------------------------------------- */

.featured-title {
    color: var(--os-sage);
    border-bottom-color: rgba(82, 121, 111, 0.2);
}

.featured-wrapper .post-title a:hover {
    color: var(--os-forest);
}

/* --------------------------------------------------------------------------
   Post Feed
   -------------------------------------------------------------------------- */

.feed + .feed {
    border-top-color: rgba(27, 67, 50, 0.08);
}

.feed-calendar {
    color: var(--os-forest);
}

.feed:hover .feed-title {
    color: var(--os-forest);
}

.feed-title {
    transition: color 0.15s ease;
}

/* --------------------------------------------------------------------------
   Single Post / Page
   -------------------------------------------------------------------------- */

.single-meta-tag .post-tag {
    color: var(--os-forest);
}

.single-cta {
    border-top-color: var(--os-forest);
}

/* --------------------------------------------------------------------------
   Tags
   -------------------------------------------------------------------------- */

.tag .tag-name {
    color: var(--os-forest);
}

/* --------------------------------------------------------------------------
   Buttons & Interactive Elements
   -------------------------------------------------------------------------- */

.button,
.gh-btn,
.gh-primary-btn {
    transition: background-color 0.15s ease, color 0.15s ease, box-shadow 0.15s ease;
}

.gh-primary-btn:hover {
    box-shadow: 0 2px 8px rgba(27, 67, 50, 0.2);
}

/* --------------------------------------------------------------------------
   Data Embeds (maps, charts, iframes)
   -------------------------------------------------------------------------- */

.gh-content .kg-card.kg-html-card {
    margin-top: 2rem;
    margin-bottom: 2rem;
}

.gh-content .kg-html-card iframe {
    width: 100%;
    border: 1px solid rgba(27, 67, 50, 0.1);
    border-radius: 8px;
}

/* --------------------------------------------------------------------------
   Footer
   -------------------------------------------------------------------------- */

.gh-foot {
    border-top: 1px solid rgba(27, 67, 50, 0.08);
}

.gh-copyright {
    color: var(--os-sage);
}

.gh-powered-by a {
    color: var(--os-sage);
}

.gh-foot-menu a {
    transition: color 0.15s ease;
}

.gh-foot-menu a:hover {
    color: var(--os-forest);
}

/* --------------------------------------------------------------------------
   Misc
   -------------------------------------------------------------------------- */

::selection {
    background-color: rgba(27, 67, 50, 0.15);
}

a {
    color: var(--os-charcoal);
}

.gh-content a:not(.kg-btn):not(.gh-btn) {
    color: var(--os-forest);
    text-decoration-color: rgba(27, 67, 50, 0.3);
    text-underline-offset: 2px;
    transition: text-decoration-color 0.15s ease;
}

.gh-content a:not(.kg-btn):not(.gh-btn):hover {
    text-decoration-color: var(--os-forest);
}

/* --------------------------------------------------------------------------
   Post Content (.os-post wrapper)
   All analysis posts use a <div class="os-post"> wrapper inside an HTML card.
   Progressive enhancement: .os-animated is added by JS to enable animations.
   Without JS (email), everything renders visible by default.
   -------------------------------------------------------------------------- */

.gh-content .kg-card.kg-html-card {
    max-width: none;
    width: 100%;
}

.gh-content .os-post {
    --bg: #fff;
    --text: #1a1a1a;
    --muted: #666;
    --accent: #1B4332;
    --accent-light: #2D6A4F;
    --border: #e5e5e5;
    --card-bg: #f8f9fa;
    width: 100%;
    max-width: none;
}

.gh-content .os-post .meta {
    color: var(--muted);
    font-size: 0.9rem;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
}

.gh-content .os-post .lede {
    font-size: 1.15rem;
    color: #333;
    margin-bottom: 2rem;
}

.gh-content .os-post h2 {
    font-size: 1.5rem;
    margin: 2.5rem 0 1rem;
    color: var(--accent);
}

.gh-content .os-post p {
    margin-bottom: 1.25rem;
}

/* --- Tables --- */

.gh-content .os-post table {
    display: table;
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    font-size: 1.15rem;
    overflow: hidden;
    border-radius: 8px;
    border: none;
    border-spacing: 0;
    background: #fff;
}

.gh-content .os-post thead th {
    background: var(--accent);
    color: #fff;
    padding: 1rem 1.25rem;
    text-align: left;
    font-weight: 600;
    border: none;
    font-size: 1.15rem;
}

.gh-content .os-post thead th:not(:first-child) {
    text-align: center;
}

.gh-content .os-post tbody td {
    padding: 1rem 1.25rem;
    border: none;
    border-bottom: 1px solid #eee;
    background: #fff;
    color: var(--text);
    transition: background 0.2s ease;
    font-size: 1.15rem;
}

.gh-content .os-post tbody td:not(:first-child) {
    text-align: center;
}

.gh-content .os-post tbody tr:hover td {
    background: #e8f5e9;
}

.gh-content .os-post tbody tr.highlight-row td {
    background: #e8f5e9;
    font-weight: 600;
}

.gh-content .os-post tbody tr.highlight-row:hover td {
    background: #d4edda;
}

.gh-content .os-post tbody tr:last-child td {
    border-bottom: none;
}

/* Table animation: only when JS is active */
.os-animated table {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
}

.os-animated table.visible {
    opacity: 1;
    transform: translateY(0);
}

.os-animated table.visible tbody tr {
    opacity: 0;
    animation: osRowSlide 0.4s ease forwards;
}

.os-animated table.visible tbody tr:nth-child(1) { animation-delay: 0.1s; }
.os-animated table.visible tbody tr:nth-child(2) { animation-delay: 0.2s; }
.os-animated table.visible tbody tr:nth-child(3) { animation-delay: 0.3s; }
.os-animated table.visible tbody tr:nth-child(4) { animation-delay: 0.4s; }
.os-animated table.visible tbody tr:nth-child(5) { animation-delay: 0.5s; }
.os-animated table.visible tbody tr:nth-child(6) { animation-delay: 0.6s; }
.os-animated table.visible tbody tr:nth-child(7) { animation-delay: 0.7s; }
.os-animated table.visible tbody tr:nth-child(8) { animation-delay: 0.8s; }

@keyframes osRowSlide {
    from { opacity: 0; transform: translateX(-12px); }
    to   { opacity: 1; transform: translateX(0); }
}

/* --- Chart containers --- */

.gh-content .os-post .chart-wrap {
    margin: 2rem 0;
    background: var(--card-bg);
    border-radius: 8px;
    padding: 1.25rem 1.5rem;
}

.gh-content .os-post .chart-title {
    text-align: center;
    font-size: 13px;
    color: #888;
    margin-top: 12px;
    letter-spacing: 0.02em;
}

/* Hide fallback images when JS builds the interactive chart */
.os-animated .chart-fallback {
    display: none;
}

/* --- Stat card --- */

.gh-content .os-post .stat-card {
    display: flex;
    flex-wrap: nowrap;
    gap: 1.5rem;
    margin: 2rem 0;
    padding: 1.5rem;
    background: var(--accent);
    color: #fff;
    border-radius: 8px;
    align-items: center;
}

.gh-content .os-post .stat-card > div:first-child {
    flex-shrink: 0;
    min-width: 80px;
}

.gh-content .os-post .stat-card .number {
    font-size: 3rem;
    font-weight: 700;
    line-height: 1;
    white-space: nowrap;
    color: #fff;
}

.gh-content .os-post .stat-card .label {
    font-size: 1rem;
    opacity: 0.9;
    color: #fff;
}

.gh-content .os-post .stat-card strong {
    color: #fff;
}

/* --- Lists --- */

.gh-content .os-post ol,
.gh-content .os-post ul {
    margin: 0.5rem 0 1.5rem 1.5rem;
}

.gh-content .os-post li {
    margin-bottom: 0.5rem;
}

.gh-content .os-post strong {
    color: var(--accent);
}

/* --- Callout box --- */

.gh-content .os-post .bottom-line {
    background: var(--card-bg);
    border-left: 4px solid var(--accent);
    padding: 1.5rem;
    border-radius: 0 8px 8px 0;
    margin: 2rem 0;
}

.gh-content .os-post .bottom-line li {
    margin-bottom: 0.75rem;
}

/* --- Footnote --- */

.gh-content .os-post .footnote {
    font-size: 0.85rem;
    color: var(--muted);
    margin-top: 3rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
}

.gh-content .os-post .footnote a {
    color: var(--accent-light);
}

/* --- Bar charts (visible by default for email) --- */

.gh-content .os-post .bar-chart {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    gap: 12px;
    padding: 0;
}

.gh-content .os-post .bar-col {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    max-width: 150px;
    cursor: default;
}

.gh-content .os-post .bar-val {
    font-size: 15px;
    font-weight: 600;
    color: #222;
    margin-bottom: 6px;
}

.gh-content .os-post .bar-inner {
    width: 80%;
    border-radius: 8px 8px 0 0;
}

.gh-content .os-post .bar-label {
    font-size: 13px;
    color: #555;
    margin-top: 10px;
    text-align: center;
    line-height: 1.3;
}

/* Bar animation: only when JS active */
.os-animated .bar-val {
    opacity: 0;
    transition: opacity 0.4s ease, color 0.2s ease;
}

.os-animated .bar-col.visible .bar-val {
    opacity: 1;
    transition-delay: 0.5s;
}

.os-animated .bar-inner {
    transform-origin: bottom;
    transform: scaleY(0);
    transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1), filter 0.2s ease, box-shadow 0.2s ease;
}

.os-animated .bar-col.visible .bar-inner {
    transform: scaleY(1);
}

.os-animated .bar-col:nth-child(1) .bar-inner { transition-delay: 0s; }
.os-animated .bar-col:nth-child(2) .bar-inner { transition-delay: 0.12s; }
.os-animated .bar-col:nth-child(3) .bar-inner { transition-delay: 0.24s; }
.os-animated .bar-col:nth-child(4) .bar-inner { transition-delay: 0.36s; }

.os-animated .bar-col:hover .bar-inner {
    filter: brightness(1.15);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

.os-animated .bar-col:hover .bar-val {
    color: var(--accent);
    font-weight: 700;
}

/* --- Line charts (visible by default for email) --- */

.gh-content .os-post .line-chart {
    position: relative;
    width: 100%;
    height: 320px;
}

.gh-content .os-post .line-chart svg {
    width: 100%;
    height: 100%;
    overflow: visible;
}

.gh-content .os-post .line-chart .line-path {
    fill: none;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.gh-content .os-post .line-chart .dot {
    cursor: default;
}

.gh-content .os-post .line-chart .tooltip-group {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.15s ease;
}

.gh-content .os-post .line-chart .tooltip-group.show {
    opacity: 1;
}

.gh-content .os-post .line-chart .legend-item { font-size: 13px; fill: #555; }
.gh-content .os-post .line-chart .axis-label  { font-size: 11px; fill: #777; }
.gh-content .os-post .line-chart .grid-line   { stroke: #e8e8e8; stroke-width: 1; }
.gh-content .os-post .line-chart .axis-title  { font-size: 12px; fill: #555; }

/* Line animation: only when JS active */
.os-animated .line-chart .line-path {
    stroke-dasharray: 2000;
    stroke-dashoffset: 2000;
    transition: stroke-dashoffset 1.5s ease;
}

.os-animated .line-chart .fill-path {
    opacity: 0;
    transition: opacity 1s ease 0.8s;
}

.os-animated .line-chart.visible .line-path {
    stroke-dashoffset: 0;
}

.os-animated .line-chart.visible .fill-path {
    opacity: 1;
}

.os-animated .line-chart .dot {
    opacity: 0;
    transition: opacity 0.3s ease, r 0.15s ease;
}

.os-animated .line-chart.visible .dot {
    opacity: 1;
}

.os-animated .line-chart .dot:hover {
    r: 7;
}

/* --- Post responsive --- */

@media (max-width: 600px) {
    .gh-content .os-post .stat-card .number {
        font-size: 2.2rem;
    }

    .gh-content .os-post table {
        font-size: 0.95rem;
    }

    .gh-content .os-post thead th {
        padding: 0.65rem 0.5rem;
        font-size: 0.9rem;
    }

    .gh-content .os-post tbody td {
        padding: 0.65rem 0.5rem;
        font-size: 0.95rem;
    }
}

/* --------------------------------------------------------------------------
   Dark Mode Overrides
   -------------------------------------------------------------------------- */

.theme-dark:root {
    --os-forest: #40916C;
    --os-sage: #74C69D;
    --os-sand: #E9C46A;
    --os-sky: #6FB3D2;
    --os-cream-soft: #1e2329;
    --os-charcoal: #dce4e8;
    --brand-color: var(--os-forest);
}

.theme-dark .cover-description {
    color: var(--os-sage);
}

.theme-dark .gh-foot {
    background-color: #1e2329;
}

.theme-dark .gh-content a:not(.kg-btn):not(.gh-btn) {
    color: var(--os-forest);
    text-decoration-color: rgba(64, 145, 108, 0.3);
}

.theme-dark .gh-content a:not(.kg-btn):not(.gh-btn):hover {
    text-decoration-color: var(--os-forest);
}

@media (prefers-color-scheme: dark) {
    html:not(.theme-light):root {
        --os-forest: #40916C;
        --os-sage: #74C69D;
        --os-sand: #E9C46A;
        --os-sky: #6FB3D2;
        --os-cream-soft: #1e2329;
        --os-charcoal: #dce4e8;
        --brand-color: var(--os-forest);
    }

    html:not(.theme-light) .cover-description {
        color: var(--os-sage);
    }

    html:not(.theme-light) .gh-foot {
        background-color: #1e2329;
    }

    html:not(.theme-light) .gh-content a:not(.kg-btn):not(.gh-btn) {
        color: var(--os-forest);
        text-decoration-color: rgba(64, 145, 108, 0.3);
    }

    html:not(.theme-light) .gh-content a:not(.kg-btn):not(.gh-btn):hover {
        text-decoration-color: var(--os-forest);
    }
}
